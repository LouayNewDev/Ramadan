<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Countdown to 2026 — Preview</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif}
body{overflow:hidden;color:white;background:black}

/* ===== SCENE ===== */
.scene{position:fixed;inset:0;transition:opacity 2s ease;z-index:0}
.sky.day{background:linear-gradient(#6ec6ff,#dff5ff)}
.sky.night{background:linear-gradient(#020024,#090979,#000)}
.sky{position:absolute;inset:0}
.ground{position:absolute;bottom:0;width:100%;height:30%;background:linear-gradient(#1e7f3b,#0f3d1f)}

.celestial{
    position:absolute;top:12%;right:12%;
    width:120px;height:120px;border-radius:50%;
    animation:float 6s ease-in-out infinite;
}
.sun{background:radial-gradient(circle,#fff59d,#fbc02d);box-shadow:0 0 80px #ffeb3b}
.moon{background:radial-gradient(circle,#eee,#aaa);box-shadow:0 0 40px #fff}
@keyframes float{50%{transform:translateY(-12px)}}

/* ===== CENTER ===== */
.center{
    position:fixed;inset:0;
    display:flex;flex-direction:column;
    justify-content:center;align-items:center;
    z-index:3;text-align:center;
}

.timer{font-size:2rem;margin-bottom:25px}

/* ===== YEAR ===== */
.year{display:flex;gap:6px;font-size:8rem;font-weight:bold}
.slot{width:90px;height:120px;overflow:hidden;position:relative}
.strip{position:absolute;top:0;width:100%}
.strip.animate{animation:roll 2s cubic-bezier(.25,.9,.3,1) forwards}
.strip div{height:120px;display:flex;align-items:center;justify-content:center}
@keyframes roll{to{transform:translateY(-120px)}}

/* ===== DUA ===== */
.dua{
    position:absolute;
    font-size:1.9rem;
    max-width:900px;
    line-height:2.1;
    text-align:center;
    opacity:0;
    transition:opacity 2s ease;
}
.dua.show{opacity:1}
.dua.hide{opacity:0}

/* ===== PREVIEW BTN ===== */
.preview-btn{
    margin-top:30px;
    padding:10px 26px;
    border-radius:30px;
    background:rgba(255,255,255,.15);
    border:1px solid rgba(255,255,255,.3);
    color:white;
    cursor:pointer;
    font-size:1.1rem;
    backdrop-filter:blur(6px);
}
.preview-btn:hover{background:rgba(255,255,255,.25)}

/* ===== FIREWORKS ===== */
canvas{position:fixed;inset:0;pointer-events:none;z-index:2}
</style>
</head>

<body>

<div class="scene">
    <div id="sky" class="sky"></div>
    <div class="celestial"></div>
    <div class="ground"></div>
</div>

<canvas id="fx"></canvas>

<div class="center">
    <div id="timer" class="timer"></div>

    <div id="year" class="year">
        <div class="slot"><div class="strip"><div>2</div></div></div>
        <div class="slot"><div class="strip"><div>0</div></div></div>
        <div class="slot"><div class="strip"><div>2</div></div></div>
        <div class="slot">
            <div id="lastDigit" class="strip">
                <div>5</div>
                <div>6</div>
            </div>
        </div>
    </div>

    <div id="dua" class="dua">
        اللهم إني أستودعك عاماً مضى، فاغفر لي ما فيه<br>
        وأعوذ بك من شر ما فيه، واكتب لي الخير فيما هو آتٍ
    </div>

    <button id="previewBtn" class="preview-btn">Skip the count down</button>
</div>

<script>
/* ===== DAY / NIGHT ===== */
const sky=document.getElementById("sky");
function updateScene(){
    const h=new Date().getHours();
    sky.className="sky "+(h>=6&&h<18?"day":"night");
}
updateScene();

/* ===== COUNTDOWN ===== */
const target=new Date("2026-01-01T00:00:00").getTime();
const timer=document.getElementById("timer");
const lastDigit=document.getElementById("lastDigit");
const previewBtn=document.getElementById("previewBtn");

let fireworksOn=false;
let rolled=false;

/* ===== OTHER ELEMENTS ===== */
const year=document.getElementById("year");
const dua=document.getElementById("dua");
let sequenceStarted=false;

/* ===== SEQUENCE ===== */
function startSequence(){
    if(sequenceStarted) return;
    sequenceStarted=true;

    previewBtn.style.display="none";
    timer.style.display="none";
    year.style.display="none";

    dua.classList.add("show");

    setTimeout(()=>{
        dua.classList.remove("show");
        dua.classList.add("hide");
    },5500);

    setTimeout(()=>{
        dua.style.display="none";
        year.style.display="flex";
        lastDigit.classList.add("animate");
        fireworksOn=true;
    },8000);
}

/* ===== TIMER ===== */
function tick(){
    const diff=target-Date.now();
    if(diff<=0){startSequence();return;}
    const d=Math.floor(diff/86400000);
    const h=Math.floor(diff/3600000)%24;
    const m=Math.floor(diff/60000)%60;
    const s=Math.floor(diff/1000)%60;
    timer.textContent=`${d}days ${h}hours ${m}minutes ${s}seconds`;
}
tick();
setInterval(tick,1000);

/* ===== PREVIEW ===== */
previewBtn.addEventListener("click",startSequence);

/* ===== FIREWORKS ===== */
const c=document.getElementById("fx");
const ctx=c.getContext("2d");
function resize(){c.width=innerWidth;c.height=innerHeight}
resize();addEventListener("resize",resize);

const fw=[],pt=[];
class Firework{
    constructor(){
        this.x=Math.random()*c.width;
        this.y=c.height;
        this.ty=Math.random()*c.height*0.6;
        this.col=`hsl(${Math.random()*360},100%,70%)`;
    }
    update(){
        this.y-=5;
        if(this.y<=this.ty){
            for(let i=0;i<Math.random()*130;i++){
                pt.push(new Particle(this.x,this.y,this.col));
            }
            return true;
        }
    }
    draw(){ctx.fillStyle=this.col;ctx.fillRect(this.x,this.y,11,11)}
}
class Particle{
    constructor(x,y,c){
        this.x=x;this.y=y;this.c=c;
        const a=Math.random()*Math.PI*2,s=Math.random()*6;
        this.vx=Math.cos(a)*s;this.vy=Math.sin(a)*s;
        this.life=80;
    }
    update(){this.x+=this.vx;this.y+=this.vy;this.vy+=.05;this.life--}
    draw(){ctx.fillStyle=this.c;ctx.beginPath();ctx.arc(this.x,this.y,2,0,7);ctx.fill()}
}
(function loop(){
    ctx.fillStyle="rgba(0,0,0,.25)";
    ctx.fillRect(0,0,c.width,c.height);
    if(fireworksOn&&Math.random()<.05)fw.push(new Firework());
    fw.forEach((f,i)=>{if(f.update())fw.splice(i,1);f.draw()});
    pt.forEach((p,i)=>{p.update();p.draw();if(p.life<=0)pt.splice(i,1)});
    requestAnimationFrame(loop);
})();
</script>

</body>
</html>

